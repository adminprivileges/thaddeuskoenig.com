<!DOCTYPE html>
<html
  lang="en"
  data-theme="dark"
>
  <head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  


<link
  rel="preload"
  as="font"
  type="font/woff2"
  href="/fonts/roboto-slab-latin-400.woff2"
  crossorigin="anonymous"
/>

<link
  rel="preload"
  as="font"
  type="font/woff2"
  href="/fonts/roboto-slab-latin-700.woff2"
  crossorigin="anonymous"
/>


<link
  rel="preload"
  as="font"
  type="font/woff2"
  href="/fonts/fira-code-latin-300.woff2"
  crossorigin="anonymous"
/>
<link
  rel="preload"
  as="font"
  type="font/woff2"
  href="/fonts/fira-code-latin-400.woff2"
  crossorigin="anonymous"
/>

<link
  rel="preload"
  as="font"
  type="font/woff2"
  href="/fonts/fira-code-latin-700.woff2"
  crossorigin="anonymous"
/>

  
  
    <meta
      name="robots"
      content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"
    />
  




<title>Nebula VPN Setup</title>

<meta
  name="description"
  content="Most people see VPN and they think of the commercial, hide myself within another million people’s traffic, product such as Nord or PIA. But this article is simply an interesting take on the technology used to bridge the physical gap between work-spaces that many professionals both technical and not became intimately familiar with over the recent 2021 pandemic.
What is Nebula and how is it different?# In a traditional sense a VPN functions as a router that bridges different LANs over an encrypted tunnel, and the traffic passed between LANs travels much like traditional traffic would when passed between LANs, in a star-like topology where all traffic destined for a peer must first pass through a switching/routing device, but what if that wasn&rsquo;t the case? What if you could simply cut out the middle man and pass traffic directly between networked nodes in a VPN network? That’s exactly what Nebula brings to the table.
"
/>

<link rel="canonical" href="https://thaddeuskoenig.com/projects/nebula_vpn_setup/" />




  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Nebula VPN Setup">
  <meta name="twitter:description" content="Most people see VPN and they think of the commercial, hide myself within another million people’s traffic, product such as Nord or PIA. But this article is simply an interesting take on the technology used to bridge the physical gap between work-spaces that many professionals both technical and not became intimately familiar with over the recent 2021 pandemic.
What is Nebula and how is it different?# In a traditional sense a VPN functions as a router that bridges different LANs over an encrypted tunnel, and the traffic passed between LANs travels much like traditional traffic would when passed between LANs, in a star-like topology where all traffic destined for a peer must first pass through a switching/routing device, but what if that wasn’t the case? What if you could simply cut out the middle man and pass traffic directly between networked nodes in a VPN network? That’s exactly what Nebula brings to the table.">

<meta property="og:url" content="https://thaddeuskoenig.com/projects/nebula_vpn_setup/">
  <meta property="og:site_name" content="Thaddeus Koenig">
  <meta property="og:title" content="Nebula VPN Setup">
  <meta property="og:description" content="Most people see VPN and they think of the commercial, hide myself within another million people’s traffic, product such as Nord or PIA. But this article is simply an interesting take on the technology used to bridge the physical gap between work-spaces that many professionals both technical and not became intimately familiar with over the recent 2021 pandemic.
What is Nebula and how is it different?# In a traditional sense a VPN functions as a router that bridges different LANs over an encrypted tunnel, and the traffic passed between LANs travels much like traditional traffic would when passed between LANs, in a star-like topology where all traffic destined for a peer must first pass through a switching/routing device, but what if that wasn’t the case? What if you could simply cut out the middle man and pass traffic directly between networked nodes in a VPN network? That’s exactly what Nebula brings to the table.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="projects">
    <meta property="article:published_time" content="2024-01-04T12:00:00-05:00">
    <meta property="article:modified_time" content="2024-01-04T12:00:00-05:00">
    <meta property="article:tag" content="Mesh Networking">
    <meta property="article:tag" content="VPN">
    <meta property="article:tag" content="Nebula">
    <meta property="article:tag" content="Certificates">


  <meta itemprop="name" content="Nebula VPN Setup">
  <meta itemprop="description" content="Most people see VPN and they think of the commercial, hide myself within another million people’s traffic, product such as Nord or PIA. But this article is simply an interesting take on the technology used to bridge the physical gap between work-spaces that many professionals both technical and not became intimately familiar with over the recent 2021 pandemic.
What is Nebula and how is it different?# In a traditional sense a VPN functions as a router that bridges different LANs over an encrypted tunnel, and the traffic passed between LANs travels much like traditional traffic would when passed between LANs, in a star-like topology where all traffic destined for a peer must first pass through a switching/routing device, but what if that wasn’t the case? What if you could simply cut out the middle man and pass traffic directly between networked nodes in a VPN network? That’s exactly what Nebula brings to the table.">
  <meta itemprop="datePublished" content="2024-01-04T12:00:00-05:00">
  <meta itemprop="dateModified" content="2024-01-04T12:00:00-05:00">
  <meta itemprop="wordCount" content="1203">
  <meta itemprop="keywords" content="Mesh Networking,VPN,Nebula,Certificates">








  
  


  








  
  
  
  


<style>
   
  @font-face{font-display:swap;font-family:Roboto Slab;font-style:normal;font-weight:100;src:local("Roboto Slab Thin "),local("Roboto Slab-Thin"),url(/fonts/roboto-slab-latin-100.woff2) format("woff2"),url(/fonts/roboto-slab-latin-100.woff) format("woff")}@font-face{font-display:swap;font-family:Roboto Slab;font-style:normal;font-weight:200;src:local("Roboto Slab Extra Light "),local("Roboto Slab-Extra Light"),url(/fonts/roboto-slab-latin-200.woff2) format("woff2"),url(/fonts/roboto-slab-latin-200.woff) format("woff")}@font-face{font-display:swap;font-family:Roboto Slab;font-style:normal;font-weight:300;src:local("Roboto Slab Light "),local("Roboto Slab-Light"),url(/fonts/roboto-slab-latin-300.woff2) format("woff2"),url(/fonts/roboto-slab-latin-300.woff) format("woff")}@font-face{font-display:swap;font-family:Roboto Slab;font-style:normal;font-weight:400;src:local("Roboto Slab Regular "),local("Roboto Slab-Regular"),url(/fonts/roboto-slab-latin-400.woff2) format("woff2"),url(/fonts/roboto-slab-latin-400.woff) format("woff")}@font-face{font-display:swap;font-family:Roboto Slab;font-style:normal;font-weight:500;src:local("Roboto Slab Medium "),local("Roboto Slab-Medium"),url(/fonts/roboto-slab-latin-500.woff2) format("woff2"),url(/fonts/roboto-slab-latin-500.woff) format("woff")}@font-face{font-display:swap;font-family:Roboto Slab;font-style:normal;font-weight:600;src:local("Roboto Slab SemiBold "),local("Roboto Slab-SemiBold"),url(/fonts/roboto-slab-latin-600.woff2) format("woff2"),url(/fonts/roboto-slab-latin-600.woff) format("woff")}@font-face{font-display:swap;font-family:Roboto Slab;font-style:normal;font-weight:700;src:local("Roboto Slab Bold "),local("Roboto Slab-Bold"),url(/fonts/roboto-slab-latin-700.woff2) format("woff2"),url(/fonts/roboto-slab-latin-700.woff) format("woff")}@font-face{font-display:swap;font-family:Roboto Slab;font-style:normal;font-weight:800;src:local("Roboto Slab ExtraBold "),local("Roboto Slab-ExtraBold"),url(/fonts/roboto-slab-latin-800.woff2) format("woff2"),url(/fonts/roboto-slab-latin-800.woff) format("woff")}@font-face{font-display:swap;font-family:Roboto Slab;font-style:normal;font-weight:900;src:local("Roboto Slab Black "),local("Roboto Slab-Black"),url(/fonts/roboto-slab-latin-900.woff2) format("woff2"),url(/fonts/roboto-slab-latin-900.woff) format("woff")}@font-face{font-display:swap;font-family:Fira Code;font-style:normal;font-weight:300;src:local("Fira Code Light "),local("Fira Code-Light"),url(/fonts/fira-code-latin-300.woff2) format("woff2"),url(/fonts/fira-code-latin-300.woff) format("woff")}@font-face{font-display:swap;font-family:Fira Code;font-style:normal;font-weight:400;src:local("Fira Code Regular "),local("Fira Code-Regular"),url(/fonts/fira-code-latin-400.woff2) format("woff2"),url(/fonts/fira-code-latin-400.woff) format("woff")}@font-face{font-display:swap;font-family:Fira Code;font-style:normal;font-weight:500;src:local("Fira Code Medium "),local("Fira Code-Medium"),url(/fonts/fira-code-latin-500.woff2) format("woff2"),url(/fonts/fira-code-latin-500.woff) format("woff")}@font-face{font-display:swap;font-family:Fira Code;font-style:normal;font-weight:600;src:local("Fira Code SemiBold "),local("Fira Code-SemiBold"),url(/fonts/fira-code-latin-600.woff2) format("woff2"),url(/fonts/fira-code-latin-600.woff) format("woff")}@font-face{font-display:swap;font-family:Fira Code;font-style:normal;font-weight:700;src:local("Fira Code Bold "),local("Fira Code-Bold"),url(/fonts/fira-code-latin-700.woff2) format("woff2"),url(/fonts/fira-code-latin-700.woff) format("woff")}

/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;-webkit-text-decoration:underline;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}[hidden],template{display:none}

/*! CC BY-SA 3.0 License | https://stackoverflow.com/a/36118384/1154965 */@keyframes blink{50%{opacity:0}to{opacity:1}}

/*! MIT License | github.com/schnerring/hugo-theme-gruvbox */:root[data-theme=light]{--bg:var(--bg0_h);--bg0:#fbf1c7;--bg0_h:#f9f5d7;--bg0_s:#f2e5bc;--bg1:#ebdbb2;--bg2:#d5c4a1;--bg3:#bdae93;--bg4:#a89984;--fg:var(--fg1);--fg0:#282828;--fg1:#3c3836;--fg2:#504945;--fg3:#665c54;--fg4:#7c6f64;--gray1:var(--fg4);--gray2:#928374;--red1:#cc241d;--red2:#9d0006;--green1:#98971a;--green2:#797403;--yellow1:#d79921;--yellow2:#b57614;--blue1:#458588;--blue2:#076678;--purple1:#b16286;--purple2:#8f3f71;--aqua1:#689d6a;--aqua2:#427b58;--orange1:#d65d0e;--orange2:#af3a03}[data-theme=light]:root .light--hidden{display:none}:root[data-theme=dark]{--bg:var(--bg0_h);--bg0:#282828;--bg0_h:#1d2021;--bg0_s:#32302f;--bg1:#3c3836;--bg2:#504945;--bg3:#665c54;--bg4:#7c6f64;--fg:var(--fg1);--fg0:#fbf1c7;--fg1:#ebdbb2;--fg2:#d5c4a1;--fg3:#bdae93;--fg4:#a89984;--gray1:var(--fg4);--gray2:#928374;--red1:#cc241d;--red2:#fb4934;--green1:#98971a;--green2:#b8bb26;--yellow1:#d79921;--yellow2:#fabd2f;--blue1:#458588;--blue2:#83a598;--purple1:#b16286;--purple2:#d3869b;--aqua1:#689d6a;--aqua2:#8ec07c;--orange1:#d65d0e;--orange2:#fe8019}[data-theme=dark]:root .dark--hidden{display:none}:root{--primary:var(--aqua1);--primary-alt:var(--aqua2);--font-monospace:"Fira Code","Lucida Console",Monaco,monospace;--font-sans-serif:Verdana,Helvetica,sans-serif;--font-serif:"Roboto Slab",Georgia,serif}html{font-family:Roboto Slab,Georgia,serif;font-family:var(--font-serif);font-size:1rem;scroll-behavior:smooth}body{background:var(--bg);color:var(--fg);line-height:1.675;word-wrap:break-word}strong{letter-spacing:.35px}a{color:inherit;-webkit-text-decoration:none;text-decoration:none}a.link--external:after{content:"\2009↗"}img{border:2px solid var(--bg1);height:auto;max-width:100%}::-moz-selection{background:var(--bg4);color:var(--fg0)}::selection{background:var(--bg4);color:var(--fg0)}h1,h2,h3{color:var(--fg0);font-family:Fira Code,Lucida Console,Monaco,monospace;font-family:var(--font-monospace);font-weight:300;line-height:1.4}h1 code,h2 code,h3 code{font-size:1em}h2,h3{border-bottom:1px solid var(--bg1)}h1,h2{font-weight:400}h1{font-size:1.875rem}h2{font-size:1.75rem}h3{font-size:1.625rem}@media (min-width:768px){h1{font-size:2.375rem}h2{font-size:2rem}h3{font-size:1.75rem}}table{border-collapse:collapse;margin:2rem 0;table-layout:fixed;width:100%}table,td,th{border:1px solid var(--bg1);padding:.5rem}hr{background:var(--bg1);border:none;height:1px;margin:3rem auto;width:80%}code,pre{border-radius:.2rem;padding:0 .2em}pre code{padding:0}code,pre,th{background:var(--bg1)}code,pre,th{font-family:Fira Code,Lucida Console,Monaco,monospace;font-family:var(--font-monospace)}code code{background:var(--bg2)}pre{padding:1rem}pre{background:var(--bg1)!important;overflow:auto}pre code{background:none}pre::-webkit-scrollbar{height:.5rem;scrollbar-width:auto}pre::-webkit-scrollbar-track{background:var(--bg2);border-radius:.2rem}pre::-webkit-scrollbar-thumb{background:var(--bg4);border-radius:.2rem}.layout{display:grid;grid-template-areas:"header" "main" "footer";grid-template-rows:auto 1fr auto;height:100vh}main{align-items:start;display:grid;grid-area:main;grid-template-areas:"empty content sidebar";grid-template-columns:1fr minmax(0,650px) 4fr}header{background:var(--bg1);grid-area:header}footer{grid-area:footer}footer,main{margin:.5em 1.1em}.content{grid-area:content}.sidebar{display:none;flex-direction:column;grid-area:sidebar;margin-top:3rem;position:sticky;top:2rem}@media (min-width:992px){.sidebar{display:flex}}header{display:grid;font-family:Fira Code,Lucida Console,Monaco,monospace;font-family:var(--font-monospace);font-size:1.125rem;grid-template-areas:"heading search nav theme-toggle";grid-template-columns:auto auto 1fr auto;padding:.75rem}.logo{color:var(--fg0);display:flex;font-weight:700;grid-area:heading}.logo:hover .logo__cursor{animation:blink 1s infinite;opacity:1}.logo__chevron,.logo__cursor{margin-left:.5rem}.logo__cursor{opacity:0}.logo__text{display:none}@media (min-width:768px){.logo__text{display:block}}.search{display:flex;grid-area:search;margin:0 1rem}#search__text{background:var(--bg2);border:1px solid var(--bg2);border-radius:.2rem;caret-color:var(--fg);color:var(--fg);outline:none;padding:0 .5rem;width:100%}#search__text:hover{border-color:var(--bg3)}#search__text:focus{border-color:var(--bg4)}#search__text::-moz-placeholder{color:var(--fg3)}#search__text::placeholder{color:var(--fg3)}#search__text[type=search]::-webkit-search-cancel-button{-webkit-appearance:none;appearance:none}#search__suggestions{background:var(--bg);border-radius:.2rem;box-shadow:0 .5rem 1rem var(--bg1);font-family:Roboto Slab,Georgia,serif;font-family:var(--font-serif);left:0;margin-top:2rem;position:absolute;width:95vw;z-index:1000}@media (min-width:768px){.search{position:relative}#search__suggestions{width:60vw}}.search__suggestions--hidden{display:none}.search__suggestion-item{border-bottom:1px dashed var(--bg2);display:grid;grid-template-columns:1fr 2fr}.search__suggestion-item:focus,.search__suggestion-item:focus-visible,.search__suggestion-item:hover{background:var(--bg1);cursor:pointer;outline:none}.search__suggestion-item:last-child{border:none}.search__suggestion-description,.search__suggestion-title{margin:1rem 0;padding:0 1rem}.search__suggestion-title{font-weight:700}.search__suggestion-description{border-left:1px solid var(--bg2)}.search__no-results{padding:.75rem}.theme__toggle{align-items:center;background:none;border:none;color:var(--yellow1);cursor:pointer;display:flex;grid-area:theme-toggle;margin:0 1rem}.theme__toggle:hover{color:var(--yellow2)}.theme__toggle svg{height:28px;width:28px}nav#menu{align-items:center;display:flex;grid-area:nav;justify-content:flex-end}nav#menu .menu__item{color:var(--fg)}nav#menu .menu__item:hover{color:var(--fg3);cursor:pointer}nav#menu ul{list-style:none;margin:0;padding:0}nav#menu ul.menu--horizontal{align-items:center;display:none}nav#menu ul.menu--horizontal li{display:inline-block;margin:0 .75rem}@media (min-width:768px){nav#menu ul.menu--horizontal{display:flex}}nav#menu ul.menu--vertical{background:var(--fg0);bottom:0;margin:0;padding:3rem;position:fixed;right:0;top:0;transform:translate(100%);transition:transform .5s cubic-bezier(.9,0,.1,1);width:50%;z-index:10}nav#menu ul.menu--vertical .menu__item{color:var(--bg1)}nav#menu ul.menu--vertical .menu__item:hover{color:var(--bg4)}nav#menu .menu__burger{display:flex;height:24px;width:24px}nav#menu .menu__burger>*{position:absolute}nav#menu .menu__burger svg{height:inherit;width:inherit;z-index:20}nav#menu .menu__burger input{height:inherit;opacity:0;width:inherit;z-index:30}nav#menu .menu__burger input:checked~ul.menu--vertical{transform:none}nav#menu .menu__burger input:checked~svg{stroke:var(--bg1)}@media (min-width:768px){nav#menu .menu__burger{display:none}}.sidebar{font-family:Fira Code,Lucida Console,Monaco,monospace;font-family:var(--font-monospace);margin-left:auto;margin-right:auto;max-width:350px;padding-left:2.5rem}.sidebar hr{margin:1.5rem auto}.sidebar svg{fill:var(--fg)}.jr-basics__image{background:var(--bg1);border:2px solid var(--bg2)}.jr-basics__summary{color:var(--fg3);font-family:Roboto Slab,Georgia,serif;font-family:var(--font-serif);margin:.75rem 0}.jr-basics__profile a:hover{color:var(--fg3)}.jr-basics__profile a:hover svg{fill:var(--fg3)}.content-section,.post{border-bottom:2px dotted var(--bg1);padding:2rem 0}.post img:not(figure img){box-sizing:border-box;margin:.5rem 0}.post-content__read-more,.post-header{font-family:Fira Code,Lucida Console,Monaco,monospace;font-family:var(--font-monospace)}.post-content{margin:1.3rem 0}.post-content__read-more{color:var(--primary-alt);margin-top:1.3rem}.post-content a,.post-header a{color:var(--primary-alt)}.post-content a:hover,.post-header a:hover{color:var(--primary)}.post-tags{align-items:center;display:flex;flex-wrap:wrap;gap:.9rem;margin:1rem 0}.post-tag{font-size:.9rem;line-height:1}.post-tag:before{content:"#"}.post-heading__anchor{display:none}h1:hover .post-heading__anchor,h2:hover .post-heading__anchor,h3:hover .post-heading__anchor{display:inline-block}.jr-basics__image,.jr-basics__item,.jr-basics__profile-icon,.jr-basics__profile-item{align-items:center;display:flex}.jr-basics__name{font-size:1.125rem;font-weight:700}.jr-basics__item{flex-direction:column;text-align:center}.jr-basics__item hr{margin:1.5rem auto}.jr-basics__image{border-radius:50%;height:250px;justify-content:center;overflow:hidden;width:250px}.jr-basics__label,.jr-basics__name,.jr-basics__summary{margin-top:.75rem}.jr-basics__profile svg{height:24px;width:24px}.jr-basics__profile,.jr-basics__profile-item{display:flex}.jr-basics__profile-item{display:flex;padding:.2rem}.jr-basics__profile--col{flex-direction:column}.jr-basics__profile--row{flex-wrap:wrap;justify-content:space-evenly}.jr-basics__profile-icon{padding:0 .75rem}
   
</style>

<link
  rel="preload"
  href="/css/non-critical.979fb31ac332b42b6b26763f7263e452271c9d83fa454c048b951eee7c8c74d628fcd72697b3ac484f455f71c091a1d2db913786fe6c795eafab76cd7cbaba99.css"
  as="style"
  onload="this.onload=null;this.rel='stylesheet'"
  
    integrity="sha512-l5+zGsMytCtrJnY/cmPkUiccnYP6RUwEi5Ue7nyMdNYo/Ncml7OsSE9FX3HAkaHS25E3hv5seV6vq3bNfLq6mQ=="
  
/>


<link
  id="prism-dark"
  rel="preload"
  href="/prism-themes/prism-gruvbox-dark.min.54aecc64074623a4f9898544dcbdab9e804f1560ef0b38f4cf8e10fcaaf72264e798cb407c601aca6ecd833ec4eb93d66535581f18d45ba202cf848b70dbc332.css"
  as="style"
  onload="this.onload=null;this.rel='stylesheet'"
  integrity="sha512-VK7MZAdGI6T5iYVE3L2rnoBPFWDvCzj0z44Q/Kr3ImTnmMtAfGAaym7Ngz7E65PWZTVYHxjUW6ICz4SLcNvDMg=="
  
/>


<link
  id="prism-light"
  rel="preload"
  href="/prism-themes/prism-gruvbox-light.min.42a221741efe997fcc94187c39d63c555560678789ac9ca856c74a5f0ddb2aa6c50d38b2ffbecc7a99038cbbd2efa99746e862267f781c559e0cfec10b88a5fc.css"
  as="style"
  onload="this.onload=null;this.rel='stylesheet'"
  
    integrity="sha512-QqIhdB7&#43;mX/MlBh8OdY8VVVgZ4eJrJyoVsdKXw3bKqbFDTiy/77MepkDjLvS76mXRuhiJn94HFWeDP7BC4il/A=="
  
  disabled
/>

<noscript>
  
    <link
      rel="stylesheet"
      href="/prism-themes/prism-gruvbox-dark.min.54aecc64074623a4f9898544dcbdab9e804f1560ef0b38f4cf8e10fcaaf72264e798cb407c601aca6ecd833ec4eb93d66535581f18d45ba202cf848b70dbc332.css"
      
        integrity="sha512-VK7MZAdGI6T5iYVE3L2rnoBPFWDvCzj0z44Q/Kr3ImTnmMtAfGAaym7Ngz7E65PWZTVYHxjUW6ICz4SLcNvDMg=="
      
    />
  


  <link
    rel="stylesheet"
    href="/css/non-critical.979fb31ac332b42b6b26763f7263e452271c9d83fa454c048b951eee7c8c74d628fcd72697b3ac484f455f71c091a1d2db913786fe6c795eafab76cd7cbaba99.css"
    
      integrity="sha512-l5+zGsMytCtrJnY/cmPkUiccnYP6RUwEi5Ue7nyMdNYo/Ncml7OsSE9FX3HAkaHS25E3hv5seV6vq3bNfLq6mQ=="
    
  />
</noscript>


  

  




<script>
  (()=>{function c(){if(localStorage&&localStorage.getItem("theme"))return localStorage.getItem("theme");if(window.matchMedia)return window.matchMedia("(prefers-color-scheme: light)").matches?"light":"dark"}function n(t){document.documentElement.setAttribute("data-theme",t);let e=document.getElementById("prism-dark"),i=document.getElementById("prism-light");e.toggleAttribute("disabled",t==="light"),i.toggleAttribute("disabled",t==="dark"),localStorage.setItem("theme",t)}var o=c();o&&n(o);function l(t){let e=t.currentTarget.classList.contains("light--hidden")?"light":"dark";n(e)}document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".theme__toggle").forEach(e=>{e.addEventListener("click",l)})});})();

</script>


  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
<link rel="manifest" href="/site.webmanifest" />
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#282828" />
<meta name="msapplication-TileColor" content="#282828" />
<meta name="theme-color" content="#282828" />



  
  

</head>

  <body>
    <div class="layout">
      <header>
  <a
    class="logo"
    href="/"
  >
    
      <div class="logo__text">thaddeuskoenig.com</div>
    
    <div class="logo__chevron">></div>
    <div class="logo__cursor">█</div>
  </a>

  <div class="search">
    <input
      id="search__text"
      type="search"
      placeholder="Search..."
      aria-label="Search"
      autocomplete="off"
    />
    <div id="search__suggestions" class="search__suggestions--hidden"></div>
  </div>

  <nav id="menu">
    <ul class="menu--horizontal">
      
        <li class="menu__item">
          <a href="/blog">Blog</a>
        </li>
      
        <li class="menu__item">
          <a href="/projects">Projects</a>
        </li>
      
        <li class="menu__item">
          <a href="/about">About</a>
        </li>
      
    </ul>

    <div class="menu__burger">
      
      <input class="menu__item" type="checkbox" aria-label="Open main menu" />

      
<svg
  xmlns="http://www.w3.org/2000/svg"
  width="24"
  height="24"
  viewBox="0 0 24 24"
  fill="none"
  stroke="currentColor"
  stroke-width="2"
  stroke-linecap="round"
  stroke-linejoin="round"
  class="icon icon-tabler icons-tabler-outline icon-tabler-menu-2"
>
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M4 6l16 0" />
  <path d="M4 12l16 0" />
  <path d="M4 18l16 0" />
</svg>




      <ul class="menu--vertical">
        
          <li>
            <a class="menu__item" href="/blog">Blog</a>
          </li>
        
          <li>
            <a class="menu__item" href="/projects">Projects</a>
          </li>
        
          <li>
            <a class="menu__item" href="/about">About</a>
          </li>
        
      </ul>
    </div>
  </nav>

  <button class="theme__toggle light--hidden" aria-label="Toggle light mode">
    
<svg
  xmlns="http://www.w3.org/2000/svg"
  width="24"
  height="24"
  viewBox="0 0 24 24"
  fill="none"
  stroke="currentColor"
  stroke-width="2"
  stroke-linecap="round"
  stroke-linejoin="round"
  class="icon icon-tabler icons-tabler-outline icon-tabler-sun"
>
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0" />
  <path d="M3 12h1m8 -9v1m8 8h1m-9 8v1m-6.4 -15.4l.7 .7m12.1 -.7l-.7 .7m0 11.4l.7 .7m-12.1 -.7l-.7 .7" />
</svg>


  </button>

  <button class="theme__toggle dark--hidden" aria-label="Toggle dark mode">
    
<svg
  xmlns="http://www.w3.org/2000/svg"
  width="24"
  height="24"
  viewBox="0 0 24 24"
  fill="none"
  stroke="currentColor"
  stroke-width="2"
  stroke-linecap="round"
  stroke-linejoin="round"
  class="icon icon-tabler icons-tabler-outline icon-tabler-moon"
>
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
</svg>


  </button>
</header>

      <main>
        <div class="content">
          
  <article class="post">
    <div class="post-header">
      <h1>Nebula VPN Setup</h1>
      <div class="post-meta"><span>2024-01-04</span>
    <div class="post-tags">
      <a class="post-tag" href="https://thaddeuskoenig.com/tags/mesh-networking">mesh&#8209;networking</a><a class="post-tag" href="https://thaddeuskoenig.com/tags/vpn">vpn</a><a class="post-tag" href="https://thaddeuskoenig.com/tags/nebula">nebula</a><a class="post-tag" href="https://thaddeuskoenig.com/tags/certificates">certificates</a>
    </div>
  

  
</div>

    </div>

    <div class="post-content">
      <p>Most people see VPN and they think of the commercial, hide myself within another million people’s traffic, product such as Nord or PIA. But this article is simply an interesting take on the technology used to bridge the physical gap between work-spaces that many professionals both technical and not became intimately familiar with over the recent 2021 pandemic.</p>
<h2 id="what-is-nebula-and-how-is-it-different">What is Nebula and how is it different?<a href="#what-is-nebula-and-how-is-it-different" class="post-heading__anchor" aria-hidden="true">#</a>
</h2>
<p>In a traditional sense a VPN functions as a router that bridges different LANs over an encrypted tunnel, and the traffic passed between LANs travels much like traditional traffic would when passed between LANs, in a star-like topology where all traffic destined for a peer must first pass through a switching/routing device, but what if that wasn&rsquo;t the case? What if you could simply cut out the middle man and pass traffic directly between networked nodes in a VPN network? That’s exactly what Nebula brings to the table.</p>
<h2 id="okay-how-does-it-do-that">Okay, how does it do that?<a href="#okay-how-does-it-do-that" class="post-heading__anchor" aria-hidden="true">#</a>
</h2>
<p>When using nebula a user sets up a “Lighthouse”, which much like the object of its namesake serves the purpose of aiding in the navigation of lost devices. If two devices have a logically “closer” route to on another than through the lighthouse, they can simply poll the lighthouse for the IP and UDP source port of on another and erect a new tunnel directly to one another by spoofing the lighthouse IP as the source which effectively can allow two devices to communicate directly to one another even if both are behind NAT. If this connection fails for any reason the devices can call back and route traffic through the lighthouse much like a traditional VPN.</p>
<h2 id="considerations">Considerations<a href="#considerations" class="post-heading__anchor" aria-hidden="true">#</a>
</h2>
<p>Before we get into setup, I want to point out a few things of note. Much like Openvpn and Wireguard, nebula uses UDP, which is a connectionless protocol, which allows the flexibility to make this technology viable. That being said this can cause some problems if certain security protocols are in place such as Deep Application Boundary Validation which would in turn notice the disingenuous nature of the spoofed packets and drop them before they reach the target. Nebula is resilient enough to still function if this is happening on one side, but id both users are subject to such scrutiny then Nebula is completely off the table. Also you&rsquo;re going to want a lighthouse that always maintains a static IP address, the clients can have dynamic IP addresses, but the second the lighthouse IP changes you&rsquo;re going to have a lot of headaches as the lighthouse public IP is hard-coded into the configuration files resident on all the devices, the cheapest and most popular way to achieve this is by simply renting a cloud VPS from your favorite provider. I typically use AWS, but Linode and Digital Ocean sponsor a lot of my favorite podcasts and Youtube Channels so i know they&rsquo;re cheaper, and have many codes that let you try it out on their dime for a couple months (This link will give you a $100 credit courtesy of my favorite podcast 2.5 Admins).</p>
<h2 id="how-do-i-set-it-up">How do i set it up?<a href="#how-do-i-set-it-up" class="post-heading__anchor" aria-hidden="true">#</a>
</h2>
<ol>
<li>Navigate to the Releases section of the Nebula Github Repo, and grab the tarball thats appropriate for your architecture from the assets (Today I will be using cloud VPS nodes from A Cloud Guru).
<ul>
<li>If youre using linux you can just wget the link, the following code will pull the 1.0.4 linux 64 bit tarball</li>
</ul>
</li>
</ol>
<pre tabindex="0"><code>wget https://github.com/slackhq/nebula/releases/download/v1.4.0/nebula-linux-amd64.tar.gz
</code></pre><ol start="2">
<li>From there make sure to unzip and extract the files which will result in two executables named “nebula” and “nebula-cert”.</li>
</ol>
<pre tabindex="0"><code>gunzip nebula-linux-amd64.tar.gz
tar xvf nebula-linux-amd64.tar.gz
</code></pre><ol start="3">
<li>Create your own certificate authority by using the provided executable.</li>
</ol>
<pre tabindex="0"><code>./nebula-cert ca -name &#34;Thaddeus Nebula Network&#34;
</code></pre><ol start="4">
<li>Now we will use the “nebula-cert” executable to create keys and certs for the lighthouse and clients to authenticate to one another (note, you will also dictate your IP scheme here, try to use something different that wont conflict with your home network, or anyone else’s).</li>
</ol>
<pre tabindex="0"><code>./nebula-cert sign -name &#34;lighthouse&#34; -ip &#34;192.168.111.1/24&#34;
./nebula-cert sign -name &#34;client1&#34; -ip &#34;192.168.111.2/24&#34;
./nebula-cert sign -name &#34;client2&#34; -ip &#34;192.168.111.3/24&#34;
</code></pre><ol start="5">
<li>
<p>Here you will have a .crt and a .key file for lighthouse, and also client one and two, create a /etc/nebula directory on your lighthouse and move “lighthouse.key”, “lighthouse.crt” and “ca.crt” to the directory, then proceed to scp the other files to their respective machines and directories. Every machine should have a copy of the ca.crt file, but the ca.key file should be kept somewhere safe. For then new clients need to be added to the network. If you would like they it can be removed from the lighthouse completely and keys can be generated from your own workstation.</p>
</li>
<li>
<p>From each machine make sure to download the nebula tarball and extract the contents to a directory of your choosing.</p>
</li>
<li>
<p>From here we will download the Nebula example configuration file and make a few tweaks.</p>
</li>
</ol>
<pre tabindex="0"><code>#1. Change the names of these files to match those that you set in the earlier step. 
pki:                        
   ca: /etc/nebula/ca.crt                       
   cert: /etc/nebula/lighthouse.crt                       
   key: /etc/nebula/lighthouse.key

#2. Input any static hosts that you would like saved here (set the lighthouse IP at the very least)
static_host_map:              
 &#34;192.168.32.1&#34;: [&#34;172.31.117.86:2222&#34;]

#3. Make sure this is set true on your lighthouse config
lighthouse:
 am_lighthouse: true

#4. Make sure this is empty on the lighthouse, but filled on the clients. 
hosts
 - 

#5. This is where you will set the port you would like the lighthouse to listen on. 
listen:
 host: 0.0.0.0
 port: 2222

#6. For testing purposes I opened my firewall completely, make sure to tune this for your specific purposes
 outbound:
   # Allow all outbound traffic from this node
   - port: any
     proto: any
     host: anyinbound:
   # Allow all traffic between any nebula hosts
   - port: any
     proto: any
     host: any
</code></pre><ol start="8">
<li>Once you’ve set up configuration files between the devices you in your nebula network, you can start up your light house using the “nebula” executable.</li>
</ol>
<pre tabindex="0"><code>sudo ./nebula -config ./config.yml
</code></pre><ol start="9">
<li>The setup is typically done with in seconds and your output should look a bit like this.</li>
</ol>
<pre tabindex="0"><code>INFO[0000] Firewall rule added                        
firewallRule=&#34;map[caName: caSha: direction:outgoing endPort:0 groups:[] host:any ip: proto:0 startPort:0]&#34;
INFO[0000] Firewall rule added                        
firewallRule=&#34;map[caName: caSha: direction:incoming endPort:0 groups:[] host:any ip: proto:0 startPort:0]&#34;
INFO[0000] Firewall started                     firewallHash=21716b47a7a140e448077fe66c31b4b42f232e996818d7dd1c6c4991e066dbdb
INFO[0000] Main HostMap created                      
network=192.168.32.1/24 preferredRanges=&#34;[]&#34;
INFO[0000] UDP hole punching enabled                   
INFO[0000] Nebula interface is active                    
build=1.4.0 interface=nebula1 network=192.168.32.1/24 udpAddr=&#34;0.0.0.0:2222&#34;
</code></pre><ol start="10">
<li>Issue the same command on you client device, if everything is correct you will see a successful handshake in your output</li>
</ol>
<pre tabindex="0"><code>INFO[0000] Firewall rule added                           firewallRule=&#34;map[caName: caSha: direction:outgoing endPort:0 groups:[] host:any ip: proto:0 startPort:0]&#34;
INFO[0000] Firewall rule added                           firewallRule=&#34;map[caName: caSha: direction:incoming endPort:0 groups:[] host:any ip: proto:0 startPort:0]&#34;
INFO[0000] Firewall started                          firewallHash=21716b47a7a140e448077fe66c31b4b42f232e996818d7dd1c6c4991e066dbdb
INFO[0000] Main HostMap created                          network=192.168.32.3/24 preferredRanges=&#34;[]&#34;
INFO[0000] UDP hole punching enabled                   
INFO[0000] Nebula interface is active                    build=1.4.0 interface=nebula1 network=192.168.32.3/24 udpAddr=&#34;0.0.0.0:2222&#34;
INFO[0000] Handshake message sent                        handshake=&#34;map[stage:1 style:ix_psk0]&#34; initiatorIndex=69986371 udpAddrs=&#34;[172.31.117.86:2222]&#34; vpnIp=192.168.32.1
INFO[0000] Handshake message received                    certName=lighthouse durationNs=21471018 fingerprint=7c894901bde2033f3a942941c899f4de1290018ffd9e998e856efa4186e2987a handshake=&#34;map[stage:2 style:ix_psk0]&#34; initiatorIndex=69986371 remoteIndex=69986371 responderIndex=831563762 sentCachedPackets=1 udpAddr=&#34;172.31.117.86:2222&#34; vpnIp=192.168.32.1
</code></pre><ol start="11">
<li>To take full advantage of the mesh nature of the technology set this up on another client. If they are logically closer to one another, you can start a packet capture on your lighthouse and see that it is being completely subverted in the transference of packets between nodes.</li>
</ol>

    </div>

    

    
  </article>

        </div>
        <div class="sidebar">
  

  
  
    <aside class="bio">
      

  <div class="jr__item jr-basics__item">
    
  <div class="jr-basics__image">
    <img
      src="https://i.postimg.cc/JhB8qYYT/adminprivileges-doctor-doom-as-a-young-African-American-man-wit-69ef1de7-69d7-4a18-ac87-9033e3b1fc34.png"
      alt="Picture of Thaddeus Koenig"
      width="250"
      height="250"
    />
  </div>



    
      <div class="jr-basics__name">Thaddeus Koenig</div>
    

    
      <div class="jr-basics__label">Person Who Does Things</div>
    

    
      <div class="jr-basics__email">admin@thaddeuskoenig.com</div>
    

    

    

    
      <div class="jr-basics__summary">Im a simple guy who likes computers. I derive a lot of passion and purpose from digital security and open source technology. In my free time I like cooking and working out. This blog is mainly an excercise in documentation, but I hope you can find something useful here.</div>
    

    
      

      

      
        <div class="jr-basics__location-city">Annapolis, MD</div>
      

      

      
    

    
      <hr />
      <div class="jr-basics__profile jr-basics__profile--col">
        
          

<a href="https://github.com/adminprivileges" target="_blank" rel="noreferrer me">

<div class="jr-basics__profile-item">
  <div class="jr-basics__profile-icon">
    
    <svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg>
  </div>

  
    <div class="jr-basics__profile-username">adminprivileges</div>
  
</div>


</a>

        
      </div>
    

    
      <hr />
      <div class="jr-basics__profile jr-basics__profile--row">
        
          

<a href="https://linkedin.com/in/thaddeuskoenig" target="_blank" rel="noreferrer me">

<div class="jr-basics__profile-item">
  <div class="jr-basics__profile-icon">
    
    <svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>LinkedIn</title><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>
  </div>

  
</div>


</a>

        
      </div>
    
  </div>



      
    </aside>
  

  
</div>

      </main>
      <footer>
  <div class="copyright">
    
      © 2025 Thaddeus Koenig
    
  </div>
</footer>



  







  
  



<script src="/js/main.d90e807078295d4aae45235a8fb2bafba82b70e4ae19a60347215ec684c1539ecd0a9ab9fc6bcf9cc64fd4d9d35ff6287dd26f9b34beaa0e223f28a7959042e5.js" integrity="sha512-2Q6AcHgpXUquRSNaj7K6&#43;6grcOSuGaYDRyFexoTBU57NCpq5/GvPnMZP1NnTX/YofdJvmzS&#43;qg4iPyinlZBC5Q=="></script>
<script src="/js/flexsearch.1ab5b109bf2ed66903ae10907394415caa12f5c0ee66bc80088ba135ec4a751f62e4961d6a7303b562e4db724392da85945b763b8e1858ea3fd05cc36f9b8156.js" integrity="sha512-GrWxCb8u1mkDrhCQc5RBXKoS9cDuZryACIuhNexKdR9i5JYdanMDtWLk23JDktqFlFt2O44YWOo/0FzDb5uBVg=="></script>






    </div>
  </body>
</html>
